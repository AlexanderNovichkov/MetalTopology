# Metal Topology
Данная программа позволяет вычислять персистентные гомологии на GPU, используя Metal.
Можно подключить ее в виде фреймворка в проект или использовать консольное приложение.

## Классы
- SparseMatrix - класс для работы с матрицей в разреженном формате. Можно читать из файла и записывать в файл.
- PhComputation  - класс для вычисления персистентных гомологий. Метод Compute редуцирует матрицу и возвращает результат. Метод getPersistentPairs позволяет получить устойчивые пары, его можно вызывать только после вызова метода Compute.
- PersistencePairs - класс для работы с  устойчивыми парами. Можно читать из файла и записывать в файл.


## Консольное приложение
Приложение расположено по пути `cmd/compute`.
Оно читает матрицу инцидентности симплициального комплекса из файла, находит устойчивые пары и записывает их в файл.

### Аргументы
1. Путь к файлу с матрицей, для которой требуется вычислить устойчивые пары.
2. Путь к файлу, в который будут записаны посчитанные устойчивые пары.
3. Индекс GPU. Позволяет выбрать GPU,  на которой будут производиться вычисления. Опциональный аргумент, по умолчанию равен 0.

### Формат входного файла с матрицей инцидентности симплициального комплекса
Первая строка содержит 2 числа через пробел, которые задают число симплексов в комплексе (колонок в матрице) N и число ненулевых элементов в матрице.
Следующие N строк задают симплексы (порядок симплексов важен, их размерности и значения функции фильтрации ни них должны идти в неубывающем порядке). Первое число в строке задает число симплексов M, инцидентных данному (число ненулевых элементов в колонке). Следующие M чисел задают индексы симплексов, инцидентных данному (индексы ненулевых строк в данной колонке). 

Пример входного файла можно найти по пути: `MetalTopologyTests/static/matrix_h3n2_2_30.0.txt`.

### Формат выходного файла с устойчивыми парами
Первое число задает количество устойчивых пар. Последующие строки содержат по 2 числа через пробел, которые задают индексы положительного и отрицательного симплексов. Все пары отсортированы по индексу положительного симплекса.

Пример выходного файла можно найти по пути: `MetalTopologyTests/static/matrix_h3n2_2_30.0_pairs.txt`.